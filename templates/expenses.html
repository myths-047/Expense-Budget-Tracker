{% extends "base.html" %}

{% block title %}All Expenses - Smart Expense Tracker{% endblock %}

{% block content %}
<div class="page-header">
    <h1>ğŸ“‹ All Expenses</h1>
</div>

<div class="content-box">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
        <h2>Expense List</h2>
        <a href="/add_expense" class="btn btn-primary">â• Add New Expense</a>
    </div>
    
    {% if expenses|length == 0 %}
    <div class="empty-state">
        <h3>No expenses yet!</h3>
        <p>Click "Add New Expense" to get started.</p>
    </div>
    {% else %}
    <table>
        <thead>
            <tr>
                <th>Date</th>
                <th>Category</th>
                <th>Description</th>
                <th>Amount</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            {% for expense in expenses %}
            <tr>
                <td>{{ expense.date }}</td>
                <td>{{ expense.category_name }}</td>
                <td>{{ expense.description }}</td>
                <td>${{ "%.2f"|format(expense.amount) }}</td>
                <td>
                    <a href="/delete_expense/{{ expense.id }}" 
                       class="btn btn-danger"
                       style="padding: 6px 12px; font-size: 14px;"
                       onclick="return confirm('Are you sure you want to delete this expense?')">
                       ğŸ—‘ï¸ Delete
                    </a>
                </td>
            </tr>
            {% endfor %}
            <tr style="background-color: #e8f5e9; font-weight: bold;">
                <td colspan="3" style="text-align: right;">Total:</td>
                <td colspan="2">
                    ${{ "%.2f"|format(expenses|sum(attribute='amount')) }}
                </td>
            </tr>
        </tbody>
    </table>
    {% endif %}
</div>
{% endblock %}